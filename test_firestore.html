<!DOCTYPE html>
<html>

<head>
    <title>Firestore Connection Test</title>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAPn7Wa7Cw0_NeiGNuCgUlJcIsJjNFTk84",
            authDomain: "astro-quiz-push-2026.firebaseapp.com",
            projectId: "astro-quiz-push-2026",
            storageBucket: "astro-quiz-push-2026.firebasestorage.app",
            messagingSenderId: "659060108550",
            appId: "1:659060108550:web:81bfa17f16d75453580287"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function testWrite() {
            try {
                document.getElementById('status').innerText = 'Testing Write...';
                await db.collection('subscribers').doc('test_connection_' + Date.now()).set({
                    test: true,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                document.getElementById('status').innerText = '✅ SUCCESS: Wrote to Firestore!';
                document.getElementById('status').style.color = 'green';
            } catch (error) {
                document.getElementById('status').innerText = '❌ FAILED: ' + error.message;
                document.getElementById('status').style.color = 'red';
                console.error(error);
            }
        }
    </script>
</head>

<body onload="testWrite()">
    <h1>Firestore Connectivity Test</h1>
    <h2 id="status">Waiting...</h2>
</body>

</html>